"use strict";var SocialShare=SocialShare||{};$(document).ready(function(){!function(t){function r(t,r){if(!u[t])throw new Error("Share service not defined");var n=e(t,r);return i(n),this}function e(t,r){var e=u[t].shareurl,i=u[t].paramproto;r=r||{},"facebook"===t?r.u?r.u=a+r.u:r.u=a:"twitter"===t||(r.url?r.url=a+r.url:r.url=a),"linkedin"===t&&(r.mini&&"true"===r.mini||(r.mini="true"));var s=n(r,i);console.log(s);var l=o(e,s);return l}function n(t,r){var e=[];t=t||{};for(var n in t)if(r.hasOwnProperty(n)){var o=r[n]+encodeURIComponent(t[n]);e.push(o)}return e}function o(t,r){r=r||[];var e=r.length?t+r.join("&"):t;return e}function i(t){var r=600,e=600,n=($(window).height()-e)/2,o=($(window).width()-r)/2,i="status=1,width="+r+",height="+e+",top="+n+",left="+o,a=t,u="_blank";return window.open(a,u,i),!1}var a=window.location.href,u={twitter:{shareurl:"http://twitter.com/intent/tweet?",paramproto:{text:"text=",url:"url=",hashtags:"hashtags=",via:"via=",related:"related="}},facebook:{shareurl:"http://www.facebook.com/sharer.php?",paramproto:{u:"u="}},linkedin:{shareurl:"http://www.linkedin.com/shareArticle?",paramproto:{url:"url=",mini:"mini=",title:"title=",summary:"summary=",source:"source="}},googleplus:{shareurl:"https://plus.google.com/share?",paramproto:{url:"url=",hl:"hl="}}};!function(){function t(t,r){return r=$.map(r,function(r,e){return t+"-"+r}),function(t){if(t){var e=$.map(r,function(t,r){return"."+t});return e.join(", ")}return r}}function e(t){function e(t){return $(this).hasClass(t)}var n=Array.prototype.slice.call($(this)[0].attributes),i={};$.each(n,function(t,r){var e=r.name,n=r.value;if(0===e.indexOf(o+"-")||0===e.indexOf("data-"+o+"-")){var a=e.split(o+"-")[1];i[a]=n}});var u=a.filter(e.bind(this));if(1===u.length){var s=u[0].split("-")[1];r(s,i)}}var n=Object.keys(u),o="share",i=t(o,n)(!0),a=t(o,n)(!1);$(i).on("click",e)}();var s={share:r};return t=$.extend(t,s)}(SocialShare)});var CHQ;d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},function(t,r,e,n,o){CHQ={},CHQ.pymChild=pym.Child({polling:500}),CHQ.$body=e("body"),CHQ.init=function(){var t=CHQ.$body.width();CHQ.$body.css("min-height",9*t/16),n.init({key:"1upUGqPIAWsGpk00BecZbVpoWowPuGHm96pwPv_hppAs",callback:CHQ.dataLoaded,simpleSheet:!0,parseNumbers:!0}),CHQ.inIframe()?e(".iframe-show").show():e(".no-iframe-show").show()},CHQ.dataLoaded=function(t,r){console.log("data",t),CHQ.$body.removeClass("loading"),CHQ.render(),setTimeout(CHQ.startEvents,2e3)},CHQ.startEvents=function(){e(window).resize(function(){clearTimeout(CHQ.timeoutId),CHQ.timeoutId=setTimeout(CHQ.render,500)})},CHQ.render=function(){e("#chart-container").width();console.log("render!")},CHQ.inIframe=function(){try{return window.self!==window.top}catch(t){return!0}}}(window,document,jQuery,Tabletop,Mustache);